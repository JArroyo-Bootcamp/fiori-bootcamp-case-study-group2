<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="1.0"
xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx"
xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"
xmlns:sap="http://www.sap.com/Protocols/SAPData">
<edmx:DataServices m:DataServiceVersion="2.0">

 <Schema Namespace="OrderService" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
        
        <!-- ===================== -->
        <!-- Entity Types          -->
        <!-- ===================== -->

        <EntityType Name="Order">
            <Key>
                <PropertyRef Name="OrderID"/>
            </Key>              
            <Property Name="OrderID" Type="Edm.Int32" MaxLength="40" Nullable="false" sap:label="Order Number" />              
            <Property Name="CreationDate" Type="Edm.Date" Nullable="false" sap:label="Creation Date"/>
            <Property Name="RecPlantID"  Type="Edm.Int32" Nullable="false" sap:label="Receiving Plant ID"/>
            <Property Name="RecPlantDesc" Type="Edm.String" Nullable="false" sap:label="Receiving Plant Desc"/>            
            <Property Name="DelPlantID" Type="Edm.Int32" Nullable="false" sap:label="Delivering Plant ID"/>
            <Property Name="DelPlantDesc" Type="Edm.String" Nullable="false" sap:label="Delivering Plant Desc"/>                 
            <Property Name="Status" Type="Edm.String" Nullable="false" sap:label="Status"/>                            

            <NavigationProperty Name="OrderItems" Relationship="OrderService.Order_OrderItems" ToRole="OrderItem" FromRole="Order" />  
            <NavigationProperty Name="RecPlant" Relationship="OrderService.Order_RecPlants" ToRole="RecPlant" FromRole="Order" />   
            <NavigationProperty Name="DelPlant" Relationship="OrderService.Order_DelPlants" ToRole="DelPlant" FromRole="Order" />  
        </EntityType>    

        <EntityType Name="OrderItem">
            <Key>
                <PropertyRef Name="OrderID"/>
                <PropertyRef Name="ProductName"/>                
            </Key>
            <Property Name="OrderID" Type="Edm.Int32" MaxLength="40" Nullable="false" sap:label="Order Number"/>
            <Property Name="ProductName" Type="Edm.String" Nullable="false" sap:label="Product Name"/>
            <Property Name="Quantity" Type="Edm.Int32" Nullable="false" sap:label="Quantity"/>
            <Property Name="PricePerQty" Type="Edm.Decimal" Nullable="false" sap:label="Price Per Quantity"/>
            <Property Name="TotalPrice" Type="Edm.Decimal" Nullable="false" sap:label="Total Price"/>
        <NavigationProperty Name="Order" Relationship="OrderService.Order_OrderItems" ToRole="Order" FromRole="OrderItem" />            
        </EntityType>            
  
        <EntityType Name="RecPlant" sap:label="Receiving Plant">
            <Key>
               <PropertyRef Name="RecPlantID"/>
            </Key>
            <Property Name="RecPlantID" Type="Edm.Int32" Nullable="false" sap:label="Receiving Plant"/>
            <Property Name="RecPlantDesc" Type="Edm.String" sap:label="Receiving Plant Desc."/>
        <NavigationProperty Name="Order" Relationship="OrderService.Order_RecPlants" ToRole="Order" FromRole="RecPlant" />            
        </EntityType>         

        <EntityType Name="DelPlant" sap:label="Delivering Plant">
            <Key>
               <PropertyRef Name="DelPlantID"/>
            </Key>
            <Property Name="DelPlantID" Type="Edm.Int32" Nullable="false" sap:label="Delivering Plant"/>
            <Property Name="DelPlantDesc" Type="Edm.String" sap:label="Delivering Plant Desc."/>
        <NavigationProperty Name="Order" Relationship="OrderService.Order_DelPlants" ToRole="Order" FromRole="DelPlant" />            
        </EntityType>        

        <!-- ===================== -->
        <!-- Associations          -->
        <!-- ===================== --> 

           <Association Name="Order_OrderItems">
                <End Type="OrderService.Order" Role="Order" Multiplicity="1" />
                <End Type="OrderService.OrderItem" Role="OrderItem" Multiplicity="*" />
                <ReferentialConstraint>
                    <Principal Role="Order">
                        <PropertyRef Name="OrderID" />
                    </Principal>
                    <Dependent Role="OrderItem">
                        <PropertyRef Name="OrderID" />
                    </Dependent>
                </ReferentialConstraint>
            </Association>        

            <Association Name="Order_RecPlants">
                <End Type="OrderService.RecPlant" Role="RecPlant" Multiplicity="0..1" />
                <End Type="OrderService.Order" Role="Order" Multiplicity="*" />
                <ReferentialConstraint>
                    <Principal Role="RecPlant">
                        <PropertyRef Name="RecPlantID" />
                    </Principal>
                    <Dependent Role="Order">
                        <PropertyRef Name="RecPlantID" />
                    </Dependent>
                </ReferentialConstraint>
            </Association>          

            <Association Name="Order_DelPlants">
                <End Type="OrderService.DelPlant" Role="DelPlant" Multiplicity="0..1" />
                <End Type="OrderService.Order" Role="Order" Multiplicity="*" />
                <ReferentialConstraint>
                    <Principal Role="DelPlant">
                        <PropertyRef Name="DelPlantID" />
                    </Principal>
                    <Dependent Role="Order">
                        <PropertyRef Name="DelPlantID" />
                    </Dependent>
                </ReferentialConstraint>
            </Association>                     

        <!-- ===================== -->
        <!-- Entity Container      -->
        <!-- ===================== -->
        <EntityContainer Name="OrderServiceEntities" m:IsDefaultEntityContainer="true">
            <EntitySet Name="Orders" EntityType="OrderService.Order"/>               
            <EntitySet Name="OrderItems" EntityType="OrderService.OrderItem"/>            
            <EntitySet Name="RecPlants" EntityType="OrderService.RecPlant"/>   
            <EntitySet Name="DelPlants" EntityType="OrderService.DelPlant"/>    
            
            <AssociationSet Name="OrderOrderItems" Association="OrderService.Order_OrderItems">
                <End Role="Order" EntitySet="Orders"/>
                <End Role="OrderItem" EntitySet="OrderItems"/>
            </AssociationSet>   

            <AssociationSet Name="OrderRecPlants" Association="OrderService.Order_RecPlants">
                <End Role="RecPlant" EntitySet="RecPlants"/>
                <End Role="Order" EntitySet="Orders"/>
            </AssociationSet>     
            <AssociationSet Name="OrderDelPlants" Association="OrderService.Order_DelPlants">
                <End Role="DelPlant" EntitySet="DelPlants"/>
                <End Role="Order" EntitySet="Orders"/>
            </AssociationSet>                                          
                         
        </EntityContainer>
        
    </Schema>    
    
</edmx:DataServices>
</edmx:Edmx>